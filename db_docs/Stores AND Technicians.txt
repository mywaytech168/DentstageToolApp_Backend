CREATE TABLE stores (
    StoreUID VARCHAR(100) NOT NULL PRIMARY KEY,
    StoreName VARCHAR(100) NOT NULL
) ENGINE=InnoDB;

CREATE TABLE technicians (
    TechnicianUID VARCHAR(100) NOT NULL PRIMARY KEY,
    TechnicianName VARCHAR(100) NOT NULL,
    StoreUID VARCHAR(100),
    FOREIGN KEY (StoreUID) REFERENCES stores(StoreUID)
) ENGINE=InnoDB;

SELECT 
    TRIM(q.StoreUID) AS StoreUID,
    TRIM(q.Status110_User) AS Status110_User,
    TRIM(q.Status180_User) AS Status180_User,
    TRIM(q.Status190_User) AS Status190_User,
    TRIM(q.Status191_User) AS Status191_User,
    TRIM(q.Status199_User) AS Status199_User,
    COUNT(*) AS GroupCount
FROM quatations q
WHERE q.StoreUID IS NOT NULL 
  AND TRIM(q.StoreUID) <> '' 
  AND q.Status110_User <> '' 
  AND q.Status110_User NOT LIKE '%測試%' 
  AND q.Status199_User NOT LIKE 'U%'
GROUP BY 
    TRIM(q.StoreUID),
    TRIM(q.Status110_User),
    TRIM(q.Status180_User),
    TRIM(q.Status190_User),
    TRIM(q.Status191_User),
    TRIM(q.Status199_User)
ORDER BY GroupCount DESC;

自己創建

