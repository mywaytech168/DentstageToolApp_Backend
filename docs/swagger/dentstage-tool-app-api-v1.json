{
    "openapi": "3.0.1",
    "info": {
        "title": "Dentstage Tool App API",
        "version": "v1",
        "description": "\u63d0\u4f9b\u51f9\u75d5\u5de5\u5ee0\u5f8c\u53f0\u7cfb\u7d71\u7684\u6a19\u6e96\u5316 API \u4ecb\u9762\uff0c\u5305\u542b\u670d\u52d9\u72c0\u614b\u6aa2\u67e5\u3002",
        "contact": {
            "name": "Dentstage Tool App Team",
            "email": "support@dentstage.com"
        }
    },
    "paths": {
        "/api/HealthCheck": {
            "get": {
                "tags": [
                    "HealthCheck"
                ],
                "summary": "\u53d6\u5f97\u7cfb\u7d71\u5065\u5eb7\u72c0\u614b",
                "description": "\u56de\u50b3\u5065\u5eb7\u6aa2\u67e5\u8cc7\u8a0a\uff0c\u78ba\u8a8d\u670d\u52d9\u662f\u5426\u6b63\u5e38\u904b\u4f5c\u3002",
                "responses": {
                    "200": {
                        "description": "\u6210\u529f\u53d6\u5f97\u5065\u5eb7\u6aa2\u67e5\u8cc7\u8a0a\u3002",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HealthCheckResponse"
                                },
                                "examples": {
                                    "default": {
                                        "summary": "\u5065\u5eb7\u72c0\u614b\u7bc4\u4f8b",
                                        "value": {
                                            "status": "healthy",
                                            "message": "\u5f8c\u7aef\u670d\u52d9\u555f\u52d5\u6210\u529f",
                                            "timestamp": "2024-01-01T00:00:00Z"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/quotations/create": {
            "post": {
                "tags": [
                    "Quotations"
                ],
                "summary": "\u65b0\u589e\u4f30\u50f9\u55ae",
                "description": "\u5efa\u7acb\u4f30\u50f9\u55ae\u6642\u7684\u8acb\u6c42\u683c\u5f0f\u793a\u4f8b\uff0cphotos \u7269\u4ef6\u6703\u4f9d\u51f9\u75d5\u3001\u7f8e\u5bb9\u3001\u677f\u70e4\u3001\u5176\u4ed6\u56db\u5927\u985e\u5225\u5206\u5225\u63d0\u4ea4\u7167\u7247\u8207\u4f30\u50f9\u8a2d\u5b9a\uff0c\u6bcf\u7b46\u50b7\u75d5\u50c5\u9700\u63d0\u4f9b\u55ae\u4e00 photo \u6b04\u4f4d\u7d81\u5b9a PhotoUID\u3002",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "store": {
                                        "type": "object",
                                        "description": "\u9580\u5e02\u6280\u5e2b\u8207\u6392\u7a0b\u8cc7\u8a0a\uff0c\u7531\u5f8c\u7aef\u4f9d\u767b\u5165\u9580\u5e02\u81ea\u52d5\u88dc\u9f4a\u4f86\u6e90\u6b04\u4f4d\u3002",
                                        "properties": {
                                            "estimationTechnicianUid": {
                                                "type": "string",
                                                "description": "\u4f30\u50f9\u6280\u5e2b\u7684 UID\uff0c\u6703\u540c\u6b65\u5beb\u5165\u7dad\u4fee\u55ae\u6b04\u4f4d EstimationTechnicianUID\u3002"
                                            },
                                            "creatorTechnicianUid": {
                                                "type": "string",
                                                "description": "\u88fd\u55ae\u6280\u5e2b\u7684 UID\uff0c\u82e5\u672a\u6307\u5b9a\u5247\u8207\u4f30\u50f9\u6280\u5e2b\u76f8\u540c\uff0c\u540c\u6b65\u5b58\u5165\u7dad\u4fee\u55ae CreatorTechnicianUID\u3002"
                                            },
                                            "bookMethod": {
                                                "type": "string",
                                                "description": "\u9810\u7d04\u65b9\u5f0f\u63cf\u8ff0\uff0c\u4f8b\u5982 LINE\u3001\u96fb\u8a71\u3002"
                                            },
                                            "reservationDate": {
                                                "type": "string",
                                                "format": "date-time",
                                                "description": "\u9810\u7d04\u9032\u5ee0\u65e5\u671f\uff08ISO 8601\uff09\u3002"
                                            },
                                            "repairDate": {
                                                "type": "string",
                                                "format": "date-time",
                                                "description": "\u9810\u8a08\u7dad\u4fee\u65e5\u671f\uff08ISO 8601\uff09\u3002"
                                            }
                                        }
                                    },
                                    "car": {
                                        "type": "object",
                                        "description": "\u8eca\u8f1b\u76f8\u95dc\u8b58\u5225\u8cc7\u8a0a\u3002",
                                        "properties": {
                                            "carUid": {
                                                "type": "string",
                                                "description": "\u8eca\u8f1b\u4e3b\u6a94 UID\u3002"
                                            },
                                            "brandUid": {
                                                "type": "string",
                                                "description": "\u6307\u5b9a\u54c1\u724c UID\uff08\u9078\u586b\uff09\u3002"
                                            },
                                            "modelUid": {
                                                "type": "string",
                                                "description": "\u6307\u5b9a\u8eca\u578b UID\uff08\u9078\u586b\uff09\u3002"
                                            },
                                            "mileage": {
                                                "type": "integer",
                                                "format": "int32",
                                                "description": "\u8eca\u8f1b\u91cc\u7a0b\u6578\uff08\u516c\u91cc\uff09\u3002"
                                            }
                                        }
                                    },
                                    "customer": {
                                        "type": "object",
                                        "description": "\u5ba2\u6236\u4e3b\u6a94\u8cc7\u8a0a\u3002",
                                        "properties": {
                                            "customerUid": {
                                                "type": "string",
                                                "description": "\u5ba2\u6236 UID\u3002"
                                            }
                                        }
                                    },
                                    "photos": {
                                        "type": "object",
                                        "description": "\u4f9d\u7dad\u4fee\u985e\u578b\u5206\u7d44\u7684\u7167\u7247\u96c6\u5408\uff0c\u56db\u5927\u985e\u5225\u6703\u81ea\u52d5\u5c0d\u61c9\u51f9\u75d5\u3001\u7f8e\u5bb9\u3001\u677f\u70e4\u8207\u5176\u4ed6\u3002",
                                        "properties": {
                                            "dent": {
                                                "type": "array",
                                                "description": "\u51f9\u75d5\u985e\u5225\u7684\u7167\u7247\u8207\u4f30\u50f9\u9805\u76ee\uff0c\u6bcf\u7b46\u50c5\u7d81\u5b9a\u4e00\u5f35\u7167\u7247\u3002",
                                                "items": {
                                                    "$ref": "#/components/schemas/QuotationPhotoItem"
                                                }
                                            },
                                            "beauty": {
                                                "type": "array",
                                                "description": "\u7f8e\u5bb9\u985e\u5225\u7684\u7167\u7247\u8207\u4f30\u50f9\u9805\u76ee\uff0c\u6bcf\u7b46\u50c5\u7d81\u5b9a\u4e00\u5f35\u7167\u7247\u3002",
                                                "items": {
                                                    "$ref": "#/components/schemas/QuotationPhotoItem"
                                                }
                                            },
                                            "paint": {
                                                "type": "array",
                                                "description": "\u677f\u70e4\u985e\u5225\u7684\u7167\u7247\u8207\u4f30\u50f9\u9805\u76ee\uff0c\u6bcf\u7b46\u50c5\u7d81\u5b9a\u4e00\u5f35\u7167\u7247\u3002",
                                                "items": {
                                                    "$ref": "#/components/schemas/QuotationPhotoItem"
                                                }
                                            },
                                            "other": {
                                                "type": "array",
                                                "description": "\u5176\u4ed6\u985e\u5225\u7684\u7167\u7247\u8207\u4f30\u50f9\u9805\u76ee\uff0c\u6bcf\u7b46\u50c5\u7d81\u5b9a\u4e00\u5f35\u7167\u7247\u3002",
                                                "items": {
                                                    "$ref": "#/components/schemas/QuotationPhotoItem"
                                                }
                                            }
                                        }
                                    },
                                    "carBodyConfirmation": {
                                        "type": "object",
                                        "description": "\u8eca\u9ad4\u78ba\u8a8d\u8cc7\u8a0a\u8207\u7c3d\u540d\u3002",
                                        "properties": {
                                            "signaturePhotoUid": {
                                                "type": "string",
                                                "description": "\u7c3d\u540d\u7167\u7247\u7684 PhotoUID\u3002"
                                            },
                                            "damageMarkers": {
                                                "type": "array",
                                                "description": "\u8eca\u9ad4\u53d7\u640d\u6a19\u8a18\u96c6\u5408\uff0c\u5ea7\u6a19\u4ee5 0-1 \u6d6e\u9ede\u6578\u5448\u73fe\u3002",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "x": {
                                                            "type": "number",
                                                            "format": "double",
                                                            "description": "\u6a19\u8a18\u7684 X \u5ea7\u6a19 (0-1)\u3002"
                                                        },
                                                        "y": {
                                                            "type": "number",
                                                            "format": "double",
                                                            "description": "\u6a19\u8a18\u7684 Y \u5ea7\u6a19 (0-1)\u3002"
                                                        },
                                                        "hasDent": {
                                                            "type": "boolean",
                                                            "description": "\u8a72\u4f4d\u7f6e\u662f\u5426\u6709\u51f9\u75d5\u3002"
                                                        },
                                                        "hasScratch": {
                                                            "type": "boolean",
                                                            "description": "\u8a72\u4f4d\u7f6e\u662f\u5426\u6709\u522e\u50b7\u3002"
                                                        },
                                                        "hasPaintPeel": {
                                                            "type": "boolean",
                                                            "description": "\u8a72\u4f4d\u7f6e\u662f\u5426\u6709\u6f06\u9762\u812b\u843d\u3002"
                                                        },
                                                        "remark": {
                                                            "type": "string",
                                                            "description": "\u88dc\u5145\u8aaa\u660e\u3002"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    },
                                    "maintenance": {
                                        "type": "object",
                                        "description": "\u7dad\u4fee\u8a2d\u5b9a\u8207\u6298\u6263\u8cc7\u8a0a\u3002",
                                        "properties": {
                                            "reserveCar": {
                                                "type": "boolean",
                                                "description": "\u662f\u5426\u9700\u8981\u7559\u8eca\u3002"
                                            },
                                            "applyCoating": {
                                                "type": "boolean",
                                                "description": "\u662f\u5426\u9700\u8981\u934d\u819c\u670d\u52d9\u3002"
                                            },
                                            "applyWrapping": {
                                                "type": "boolean",
                                                "description": "\u662f\u5426\u9700\u8981\u5305\u819c\u670d\u52d9\u3002"
                                            },
                                            "hasRepainted": {
                                                "type": "boolean",
                                                "description": "\u8eca\u8f1b\u662f\u5426\u66fe\u70e4\u6f06\u3002"
                                            },
                                            "needToolEvaluation": {
                                                "type": "boolean",
                                                "description": "\u662f\u5426\u9700\u8981\u5de5\u5177\u4f30\u3002"
                                            },
                                            "otherFee": {
                                                "type": "number",
                                                "format": "double",
                                                "description": "\u5176\u4ed6\u984d\u5916\u8cbb\u7528\u3002"
                                            },
                                            "roundingDiscount": {
                                                "type": "number",
                                                "format": "double",
                                                "description": "\u96f6\u982d\u6298\u6263\u91d1\u984d\u3002"
                                            },
                                            "percentageDiscount": {
                                                "type": "number",
                                                "format": "double",
                                                "description": "\u6298\u6263\u767e\u5206\u6bd4\u3002"
                                            },
                                            "discountReason": {
                                                "type": "string",
                                                "description": "\u6298\u6263\u539f\u56e0\u63cf\u8ff0\u3002"
                                            },
                                            "estimatedRepairDays": {
                                                "type": "integer",
                                                "description": "\u9810\u4f30\u7dad\u4fee\u5929\u6578\u3002"
                                            },
                                            "estimatedRepairHours": {
                                                "type": "integer",
                                                "description": "\u9810\u4f30\u7dad\u4fee\u5c0f\u6642\u6578\u3002"
                                            },
                                            "estimatedRestorationPercentage": {
                                                "type": "integer",
                                                "description": "\u9810\u4f30\u4fee\u5fa9\u5b8c\u6210\u5ea6\u767e\u5206\u6bd4\u3002"
                                            },
                                            "fixTimeHour": {
                                                "type": "integer",
                                                "description": "\u820a\u7cfb\u7d71\u4fdd\u7559\u6b04\u4f4d\uff1a\u4f30\u8a08\u5de5\u6642\uff08\u5c0f\u6642\uff09\u3002"
                                            },
                                            "fixTimeMin": {
                                                "type": "integer",
                                                "description": "\u820a\u7cfb\u7d71\u4fdd\u7559\u6b04\u4f4d\uff1a\u4f30\u8a08\u5de5\u6642\uff08\u5206\u9418\uff09\u3002"
                                            },
                                            "fixExpectDay": {
                                                "type": "integer",
                                                "description": "\u820a\u7cfb\u7d71\u4fdd\u7559\u6b04\u4f4d\uff1a\u9810\u4f30\u5b8c\u6210\u5929\u6578\u3002"
                                            },
                                            "fixExpectHour": {
                                                "type": "integer",
                                                "description": "\u820a\u7cfb\u7d71\u4fdd\u7559\u6b04\u4f4d\uff1a\u9810\u4f30\u5b8c\u6210\u5c0f\u6642\u3002"
                                            },
                                            "suggestedPaintReason": {
                                                "type": "string",
                                                "description": "\u5efa\u8b70\u6539\u63a1\u9211\u70e4\u7684\u539f\u56e0\u3002"
                                            },
                                            "unrepairableReason": {
                                                "type": "string",
                                                "description": "\u7121\u6cd5\u4fee\u5fa9\u539f\u56e0\u3002"
                                            },
                                            "categoryAdjustments": {
                                                "type": "object",
                                                "description": "\u4f9d\u51f9\u75d5\u3001\u7f8e\u5bb9\u3001\u677f\u70e4\u3001\u5176\u4ed6\u62c6\u5206\u7684\u8cbb\u7528\u8207\u6298\u6263\u8a2d\u5b9a\u3002",
                                                "properties": {
                                                    "dent": {
                                                        "$ref": "#/components/schemas/QuotationMaintenanceCategoryAdjustment"
                                                    },
                                                    "beauty": {
                                                        "$ref": "#/components/schemas/QuotationMaintenanceCategoryAdjustment"
                                                    },
                                                    "paint": {
                                                        "$ref": "#/components/schemas/QuotationMaintenanceCategoryAdjustment"
                                                    },
                                                    "other": {
                                                        "$ref": "#/components/schemas/QuotationMaintenanceCategoryAdjustment"
                                                    }
                                                }
                                            },
                                            "remark": {
                                                "type": "string",
                                                "description": "\u7dad\u4fee\u8a2d\u5b9a\u5099\u8a3b\u3002"
                                            }
                                        }
                                    }
                                }
                            },
                            "example": {
                                "store": {
                                    "estimationTechnicianUid": "U_054C053D-FBA6-D843-9BDA-8C68E5027895",
                                    "creatorTechnicianUid": "U_054C053D-FBA6-D843-9BDA-8C68E5027895",
                                    "bookMethod": "LINE \u9810\u7d04"
                                },
                                "car": {
                                    "carUid": "Ca_00D20FB3-E0D1-440A-93C4-4F62AB511C2D",
                                    "brandUid": "B_C7CAB67F-9F5A-11F0-A812-000C2990DEAF",
                                    "modelUid": "M_E706D04B-9F5A-11F0-A812-000C2990DEAF",
                                    "mileage": 18500
                                },
                                "customer": {
                                    "customerUid": "Cu_1B65002E-EEC5-42FA-BBBB-6F5E4708610A"
                                },
                                "photos": {
                                    "dent": [
                                        {
                                            "photo": "Ph_759F19C7-5D62-4DB2-8021-2371C3136F7B",
                                            "position": "\u4fdd\u687f",
                                            "dentStatus": "\u5927\u9762\u7a4d",
                                            "description": "\u9700\u677f\u91d1\u642d\u914d\u70e4\u6f06",
                                            "estimatedAmount": 4500
                                        }
                                    ],
                                    "beauty": [],
                                    "paint": [
                                        {
                                            "photo": "Ph_1F8AC157-5AC2-4E9C-9E0C-A5E8B4C8F3B0",
                                            "position": "\u53f3\u5f8c\u8449\u5b50\u677f",
                                            "dentStatus": "\u522e\u75d5",
                                            "description": "\u522e\u50b7\u9700\u88dc\u571f\u70e4\u6f06",
                                            "estimatedAmount": 3200
                                        }
                                    ],
                                    "other": []
                                },
                                "carBodyConfirmation": {
                                    "signaturePhotoUid": "Ph_D4FB9159-CD9E-473A-A3D9-0A8FDD0B76F8",
                                    "damageMarkers": [
                                        {
                                            "x": 0.42,
                                            "y": 0.63,
                                            "hasDent": true,
                                            "hasScratch": false,
                                            "hasPaintPeel": false,
                                            "remark": "\u4e3b\u8981\u51f9\u75d5"
                                        }
                                    ]
                                },
                                "maintenance": {
                                    "reserveCar": false,
                                    "applyCoating": true,
                                    "applyWrapping": true,
                                    "hasRepainted": true,
                                    "needToolEvaluation": false,
                                    "otherFee": 1229,
                                    "roundingDiscount": 0,
                                    "percentageDiscount": 10,
                                    "discountReason": null,
                                    "estimatedRepairDays": 1,
                                    "estimatedRepairHours": 3,
                                    "estimatedRestorationPercentage": 91,
                                    "suggestedPaintReason": null,
                                    "unrepairableReason": null,
                                    "categoryAdjustments": {
                                        "dent": {
                                            "otherFee": 300,
                                            "percentageDiscount": 5,
                                            "discountReason": "\u51f9\u75d5\u7dad\u4fee\u56de\u994b\u65b9\u6848"
                                        },
                                        "beauty": {},
                                        "paint": {
                                            "otherFee": 500,
                                            "percentageDiscount": 8,
                                            "discountReason": "\u677f\u70e4\u5468\u5e74\u6298\u6263"
                                        },
                                        "other": {
                                            "otherFee": 800,
                                            "percentageDiscount": 10,
                                            "discountReason": "\u5176\u4ed6\u670d\u52d9\u8d08\u9001\u65b9\u6848"
                                        }
                                    },
                                    "remark": "\u8acb\u65bc\u4fee\u5fa9\u5f8c\u901a\u77e5\u5ba2\u6236\u53d6\u8eca"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "\u5efa\u7acb\u6210\u529f\uff0c\u56de\u50b3\u4f30\u50f9\u55ae\u7de8\u865f\u3002"
                    },
                    "400": {
                        "description": "\u8acb\u6c42\u53c3\u6578\u6709\u8aa4\u6216\u7f3a\u5c11\u5fc5\u8981\u6b04\u4f4d\u3002"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "HealthCheckResponse": {
                "type": "object",
                "properties": {
                    "status": {
                        "type": "string",
                        "description": "\u7cfb\u7d71\u6574\u9ad4\u72c0\u614b\u63cf\u8ff0\u3002"
                    },
                    "message": {
                        "type": "string",
                        "description": "\u5065\u5eb7\u6aa2\u67e5\u7684\u88dc\u5145\u8aaa\u660e\u6216\u63d0\u793a\u8a0a\u606f\u3002"
                    },
                    "timestamp": {
                        "type": "string",
                        "format": "date-time",
                        "description": "\u7522\u751f\u5065\u5eb7\u6aa2\u67e5\u7d50\u679c\u7684\u6642\u9593 (UTC)\u3002"
                    }
                },
                "required": [
                    "status",
                    "message",
                    "timestamp"
                ]
            },
            "QuotationPhotoItem": {
                "type": "object",
                "description": "\u4f30\u50f9\u55ae\u5efa\u7acb\u6216\u7de8\u8f2f\u6642\u63d0\u4ea4\u7684\u50b7\u75d5\u9805\u76ee\uff0c\u5167\u542b\u55ae\u4e00\u7167\u7247\u8207\u4f30\u50f9\u8cc7\u8a0a\u3002",
                "properties": {
                    "photo": {
                        "type": "string",
                        "description": "\u7d81\u5b9a\u50b7\u75d5\u7684 PhotoUID \u5b57\u4e32\uff0c\u50c5\u9700\u63d0\u4f9b\u4e00\u500b\u8b58\u5225\u78bc\u3002"
                    },
                    "position": {
                        "type": "string",
                        "description": "\u640d\u50b7\u4f4d\u7f6e\u6216\u90e8\u4f4d\u63cf\u8ff0\u3002"
                    },
                    "dentStatus": {
                        "type": "string",
                        "description": "\u640d\u50b7\u72c0\u614b\u63cf\u8ff0\uff0c\u4f8b\u5982\u5927\u9762\u7a4d\u6216\u522e\u75d5\u3002"
                    },
                    "description": {
                        "type": "string",
                        "description": "\u4f30\u50f9\u5099\u8a3b\u3002"
                    },
                    "estimatedAmount": {
                        "type": "number",
                        "description": "\u9810\u4f30\u91d1\u984d (\u5143)\u3002"
                    }
                },
                "required": [
                    "photo"
                ]
            },
            "QuotationMaintenanceCategoryAdjustment": {
                "type": "object",
                "description": "\u7dad\u4fee\u6298\u6263\u5206\u985e\u8a2d\u5b9a\uff0c\u6db5\u84cb\u984d\u5916\u8cbb\u7528\u8207\u767e\u5206\u6bd4\u6298\u6263\u3002",
                "properties": {
                    "otherFee": {
                        "type": "number",
                        "format": "double",
                        "description": "\u8a72\u5206\u985e\u7684\u984d\u5916\u8cbb\u7528\u3002"
                    },
                    "percentageDiscount": {
                        "type": "number",
                        "format": "double",
                        "description": "\u8a72\u5206\u985e\u7684\u6298\u6263\u767e\u5206\u6bd4\u3002"
                    },
                    "discountReason": {
                        "type": "string",
                        "description": "\u8a72\u5206\u985e\u6298\u6263\u539f\u56e0\u8aaa\u660e\u3002"
                    }
                }
            }
        }
    }
}
